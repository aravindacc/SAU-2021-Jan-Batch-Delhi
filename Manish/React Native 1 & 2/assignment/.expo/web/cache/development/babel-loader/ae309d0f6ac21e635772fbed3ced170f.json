{"ast":null,"code":"var _jsxFileName = \"/mnt/sdb7/AU/Classes/8-React-native/assignment/RNProject/components/ProductList.js\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ProductItem from \"./ProductItem\";\nexport default function ProductList(props) {\n  var _this = this;\n\n  var renderItem = function renderItem(_ref) {\n    var item = _ref.item;\n\n    if (item.show) {\n      return React.createElement(ProductItem, {\n        item: item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 9,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  var list = useSelector(function (state) {\n    return state.list;\n  });\n  var pageNum = useSelector(function (state) {\n    return state.pageNumber;\n  });\n  var dispatch = useDispatch();\n  useEffect(function () {\n    console.log(\"Involing use effect\");\n    fetchNewItems();\n  }, []);\n\n  var fetchNewItems = function fetchNewItems() {\n    console.log(\"Fetching new items...\");\n    fetch(\"https://api.jikan.moe/v3/top/manga/\" + pageNum + \"/airing\").then(function (res) {\n      return res.json();\n    }).then(function (obj) {\n      dispatch({\n        type: \"APPEND\",\n        payload: obj.top\n      });\n    });\n  };\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, React.createElement(FlatList, {\n    data: list,\n    renderItem: renderItem,\n    keyExtractor: function keyExtractor(item) {\n      return item.rank.toString() + item.members.toString();\n    },\n    onEndReached: fetchNewItems,\n    maxToRenderPerBatch: 5,\n    windowSize: 11,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/mnt/sdb7/AU/Classes/8-React-native/assignment/RNProject/components/ProductList.js"],"names":["React","useEffect","useState","useDispatch","useSelector","ProductItem","ProductList","props","renderItem","item","show","list","state","pageNum","pageNumber","dispatch","console","log","fetchNewItems","fetch","then","res","json","obj","type","payload","top","rank","toString","members"],"mappings":";;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,WAAP;AAEA,eAAe,SAASC,WAAT,CAAqBC,KAArB,EAA4B;AAAA;;AACzC,MAAMC,UAAU,GAAG,SAAbA,UAAa,OAAc;AAAA,QAAXC,IAAW,QAAXA,IAAW;;AAC/B,QAAIA,IAAI,CAACC,IAAT,EAAe;AACb,aAAO,oBAAC,WAAD;AAAa,QAAA,IAAI,EAAED,IAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAP;AACD;AACF,GAJD;;AAMA,MAAIE,IAAI,GAAGP,WAAW,CAAC,UAACQ,KAAD;AAAA,WAAWA,KAAK,CAACD,IAAjB;AAAA,GAAD,CAAtB;AACA,MAAIE,OAAO,GAAGT,WAAW,CAAC,UAACQ,KAAD;AAAA,WAAWA,KAAK,CAACE,UAAjB;AAAA,GAAD,CAAzB;AAEA,MAAMC,QAAQ,GAAGZ,WAAW,EAA5B;AACAF,EAAAA,SAAS,CAAC,YAAM;AACde,IAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAC,IAAAA,aAAa;AACd,GAHQ,EAGN,EAHM,CAAT;;AAKA,MAAMA,aAAa,GAAG,SAAhBA,aAAgB,GAAM;AAC1BF,IAAAA,OAAO,CAACC,GAAR,CAAY,uBAAZ;AACAE,IAAAA,KAAK,yCAAuCN,OAAvC,aAAL,CACGO,IADH,CACQ,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,IAAJ,EAAT;AAAA,KADR,EAEGF,IAFH,CAEQ,UAACG,GAAD,EAAS;AACbR,MAAAA,QAAQ,CAAC;AAAES,QAAAA,IAAI,EAAE,QAAR;AAAkBC,QAAAA,OAAO,EAAEF,GAAG,CAACG;AAA/B,OAAD,CAAR;AACD,KAJH;AAKD,GAPD;;AASA,SACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,QAAD;AACE,IAAA,IAAI,EAAEf,IADR;AAEE,IAAA,UAAU,EAAEH,UAFd;AAGE,IAAA,YAAY,EAAE,sBAACC,IAAD,EAAU;AACtB,aAAOA,IAAI,CAACkB,IAAL,CAAUC,QAAV,KAAqBnB,IAAI,CAACoB,OAAL,CAAaD,QAAb,EAA5B;AACD,KALH;AAME,IAAA,YAAY,EAAEV,aANhB;AAOE,IAAA,mBAAmB,EAAE,CAPvB;AAQE,IAAA,UAAU,EAAE,EARd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAcD","sourcesContent":["import { View, Text, FlatList } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport ProductItem from \"./ProductItem\";\n\nexport default function ProductList(props) {\n  const renderItem = ({ item }) => {\n    if (item.show) {\n      return <ProductItem item={item}></ProductItem>;\n    }\n  };\n\n  let list = useSelector((state) => state.list);\n  let pageNum = useSelector((state) => state.pageNumber);\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    console.log(\"Involing use effect\");\n    fetchNewItems();\n  }, []);\n\n  const fetchNewItems = () => {\n    console.log(\"Fetching new items...\");\n    fetch(`https://api.jikan.moe/v3/top/manga/${pageNum}/airing`)\n      .then((res) => res.json())\n      .then((obj) => {\n        dispatch({ type: \"APPEND\", payload: obj.top });\n      });\n  };\n\n  return (\n    <View>\n      <FlatList\n        data={list}\n        renderItem={renderItem}\n        keyExtractor={(item) => {\n          return item.rank.toString()+item.members.toString();\n        }}\n        onEndReached={fetchNewItems}\n        maxToRenderPerBatch={5}\n        windowSize={11}\n      />\n    </View>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}